window.__require=function i(e,t,o){function s(r,c){if(!t[r]){if(!e[r]){var d=r.split("/");if(d=d[d.length-1],!e[d]){var h="function"==typeof __require&&__require;if(!c&&h)return h(d,!0);if(n)return n(d,!0);throw new Error("Cannot find module '"+r+"'")}r=d}var a=t[r]={exports:{}};e[r][0].call(a.exports,function(i){return s(e[r][1][i]||i)},a,a.exports,i,e,t,o)}return t[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<o.length;r++)s(o[r]);return s}({main:[function(i,e){"use strict";cc._RF.push(e,"51106psxvNDypZSixvrADUV","main"),cc.Class({extends:cc.Component,properties:{startBtnNode:cc.Node,gameOverNode:cc.Node,isPlay:!1,bgNode:cc.Node,pipeLayer:cc.Node,landNode:cc.Node,score:0,scoreNode:cc.Node,addOneNode:cc.Node,isCollisionLast:!1,clickLayer:cc.Node,upPower:0,gravitySpeed:-7.5,birdNode:cc.Node,skifList:{default:[],type:cc.SpriteFrame},musicList:{default:[],type:cc.AudioClip}},onLoad:function(){},start:function(){this.bindClickEvent(),this.bgm()},update:function(){this.moveBg(),this.movePipe(),this.moveBird()},initScene:function(){for(var i=this.pipeLayer.children,e=0;e<i.length;e++)i[e].active=!1;this.birdNode.x=-250,this.birdNode.y=0,this.upPower=0,this.gameOverNode.active=!1,this.isCollision=!1,this.score=0,this.scoreNode.getComponent(cc.Label).string=0,this.addOneNode.active=!1},onClick:function(){this.isPlay=!0,this.startBtnNode.active=!1,this.initScene()},gameOver:function(){this.isPlay=!1,this.gameOverNode.active=!0,this.startBtnNode.active=!0},bgm:function(){cc.audioEngine.play(this.musicList[0],!0,.1)},moveBg:function(){if(this.isPlay)for(var i=this.bgNode.children,e=0;e<i.length;e++)i[e].x+=-3,i[e].x<=-960&&(i[e].x=960)},getRandom:function(){return Math.round(200*Math.random()-100)},movePipe:function(){if(this.isPlay)for(var i=this.pipeLayer.children,e=0;e<i.length;e++)i[e].x+=-3,i[e].x<=-600&&(i[e].x=600,i[e].y=this.getRandom(),i[e].active=!0)},addScore:function(){var i=this;this.score+=1,this.scoreNode.getComponent(cc.Label).string=this.score,cc.audioEngine.play(this.musicList[2],!1,.3),this.addOneNode.x=this.birdNode.x,this.addOneNode.y=this.birdNode.y+this.birdNode.height/2,this.addOneNode.active=!0,this.addOneNode.runAction(cc.sequence(cc.spawn(cc.moveBy(.3,0,50),cc.fadeOut(.3)),cc.callFunc(function(){i.addOneNode.active=!1,i.addOneNode.opacity=255})))},checkCollision:function(){var i=this.birdNode.y+this.birdNode.height/2,e=this.birdNode.y-this.birdNode.height/2,t=this.birdNode.x+this.birdNode.width/2,o=this.birdNode.x-this.birdNode.width/2;(i>=cc.winSize.height/2||e<=-cc.winSize.height/2+this.landNode.height)&&this.gameOver();for(var s=this.pipeLayer.children,n=!1,r=0;r<s.length;r++){var c=s[r],d=c.getChildByName("top"),h=c.getChildByName("bottom"),a=c.y+d.y-d.height/2,u=c.y+h.y+h.height/2,l=c.x-h.width/2,p=c.x+h.width/2;c.active&&t>=l&&o<=p&&(n=!0,(i>=a||e<=u)&&this.gameOver())}!n&&this.isCollisionLast&&this.addScore(),this.isCollisionLast=n},birdFiy:function(){this.upPower=7.5,cc.audioEngine.play(this.musicList[1],!1,.5)},moveBird:function(){if(this.isPlay){this.upPower+=this.gravitySpeed,this.birdNode.y+=this.upPower;var i=this.birdNode.getComponent(cc.Sprite);0===this.upPower?(i.spriteFrame=this.skifList[1],this.birdNode.angle=this.upPower):this.upPower>0?(i.spriteFrame=this.skifList[2],this.birdNode.angle=2*this.upPower):(i.spriteFrame=this.skifList[0],this.birdNode.angle=2*this.upPower),this.checkCollision()}},bindClickEvent:function(){var i=this;this.clickLayer.on("touchstart",function(){i.birdFiy()})}}),cc._RF.pop()},{}]},{},["main"]);